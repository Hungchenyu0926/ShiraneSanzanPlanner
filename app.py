import streamlit as st
import pandas as pd
import numpy as np

# è¨­å®šç¶²é æ¨™é¡Œèˆ‡æ’ç‰ˆ
st.set_page_config(
    page_title="ç™½å³°ä¸‰å±±ç¸±èµ°è¨ˆç•«",
    page_icon="ğŸ”ï¸",
    layout="wide"
)

# æ¨™é¡Œå€
st.title("ğŸ‡¯ğŸ‡µ å—é˜¿çˆ¾å‘æ–¯ï¼šç™½å³°ä¸‰å±±ç¸±èµ°è¨ˆç•«")
st.markdown("### åŒ—å²³ (3193m) â€¢ é–“ä¹‹å²³ (3190m) â€¢ è¾²é³¥å²³ (3026m)")
st.info("é€™æ˜¯æ‚¨çš„å°ˆå±¬ç™»å±±å„€è¡¨æ¿ï¼Œæ•´åˆäº†è¡Œç¨‹ã€è£å‚™èˆ‡æ°£è±¡è³‡è¨Šã€‚")

# å´é‚Šæ¬„ï¼šåŠŸèƒ½é¸å–®
menu = st.sidebar.radio(
    "åŠŸèƒ½é¸å–®",
    ["ğŸ“… è¡Œç¨‹è¦åŠƒ (4å¤©3å¤œ)", "ğŸ“ˆ é«˜åº¦è®ŠåŒ–è¡¨", "ğŸ’ è£å‚™æª¢æŸ¥æ¸…å–®", "â˜ï¸ å¤©æ°£é å ±"]
)

# --- åŠŸèƒ½ 1: è¡Œç¨‹è¦åŠƒ ---
if menu == "ğŸ“… è¡Œç¨‹è¦åŠƒ (4å¤©3å¤œ)":
    st.header("æ¨è–¦è¡Œç¨‹ï¼š4å¤©3å¤œ (åŒ—é€²å—å‡º)")
    
    col1, col2 = st.columns([1, 2])
    
    with col1:
        st.markdown("### Day 1: çˆ¬å‡æ—¥")
        st.write("**å»£æ²³åŸ â” åŒ—å²³è‚©ä¹‹å°å±‹**")
        st.caption("çˆ¬å‡ç´„ 1500m | æ™‚é–“ 7hr")
        st.success("ä½å®¿ï¼šåŒ—å²³è‚©ä¹‹å°å±‹ (3000m)")
        
    with col2:
        st.write("""
        - 05:00 ç”²åºœç«™æ­å·´å£«å‡ºç™¼
        - 07:00 æŠµé”å»£æ²³åŸ (1520m) èµ·ç™»
        - 10:00 ç™½æ ¹å¾¡æ± å°å±‹ (å¤§ä¼‘ã€åƒå†°æ·‡æ·‹)
        - 13:00 è‰æ»‘å¡ (é™¡å¡åœ°ç„)
        - 15:00 æŠµé”è‚©ä¹‹å°å±‹ï¼Œæ¬£è³å¯Œå£«å±±å¤•é™½
        """)
        
    st.divider()

    col3, col4 = st.columns([1, 2])
    with col3:
        st.markdown("### Day 2: ç¨œç·šæ—¥")
        st.write("**è‚©ä¹‹å°å±‹ â” åŒ—å²³ â” é–“ä¹‹å²³ â” è¾²é³¥å°å±‹**")
        st.caption("å…¨æ—¥æœ¬æœ€é«˜ç¨œç·š | æ™‚é–“ 6hr")
        st.success("ä½å®¿ï¼šè¾²é³¥å°å±‹ (2800m)")
        
    with col4:
        st.write("""
        - 04:30 æ”»é ‚åŒ—å²³ (3193m) çœ‹æ—¥å‡º
        - 06:30 åŒ—å²³å±±èŠ (é†«ç™‚ç«™ã€è£æ°´)
        - 08:30 ä¸­ç™½æ ¹å±±
        - 10:00 é–“ä¹‹å²³ (3190m) æ—¥æœ¬ç¬¬ä¸‰é«˜å³°
        - 13:00 æŠµé”è¾²é³¥å°å±‹ (åœ¨æ­¤ä¼‘æ¯ï¼Œä¸å¯å¤ªæ™šåˆ°)
        """)
        
    st.divider()

    col5, col6 = st.columns([1, 2])
    with col5:
        st.markdown("### Day 3: ä¸‹é™æ—¥")
        st.write("**è¾²é³¥å°å±‹ â” è¾²é³¥å²³ â” å¤§é–€æ¾¤å°å±‹**")
        st.caption("è†è“‹è€ƒé©—é–‹å§‹ | æ™‚é–“ 6hr")
        st.success("ä½å®¿ï¼šå¤§é–€æ¾¤å°å±‹ (1700m)")
        
    with col6:
        st.write("""
        - 05:00 å‡ºç™¼å‰å¾€è¥¿è¾²é³¥å²³
        - 06:30 è¾²é³¥å²³ (3026m) ç™½å³°ä¸‰å±±é”æˆï¼
        - 08:00 å¤§é–€æ¾¤ä¸‹é™é» (é–‹å§‹é™¡ä¸‹ï¼Œæ³¨æ„è·¯æ¨™)
        - 13:00 æŠµé”å¤§é–€æ¾¤å°å±‹ (äº«å—æºªæ°´èˆ‡ç”Ÿå•¤é…’)
        """)

    st.divider()

    col7, col8 = st.columns([1, 2])
    with col7:
        st.markdown("### Day 4: æ­¸è³¦")
        st.write("**å¤§é–€æ¾¤å°å±‹ â” å¥ˆè‰¯ç”°**")
        st.caption("è¼•é¬†æ—é“ | æ™‚é–“ 3hr")
        st.success("æ´»å‹•ï¼šå¥ˆè‰¯ç”°æº«æ³‰")
        
    with col8:
        st.write("""
        - 06:00 æ‚ é–’å‡ºç™¼
        - 09:00 æŠµé”å¥ˆè‰¯ç”°ç™¼é›»æ‰€
        - 10:00 å¥ˆè‰¯ç”°ä¹‹é‡Œæº«æ³‰ (å¥³å¸ä¹‹æ¹¯)
        - 13:00 æ­å·´å£«å›èº«å»¶æˆ–ç”²åºœ
        """)

# --- åŠŸèƒ½ 2: é«˜åº¦è®ŠåŒ–è¡¨ ---
elif menu == "ğŸ“ˆ é«˜åº¦è®ŠåŒ–è¡¨":
    st.header("ç™½å³°ä¸‰å±±ç¸±èµ°é«˜åº¦å‰–é¢åœ–")
    st.caption("Xè»¸ï¼šé ä¼°ç´¯è¨ˆè·é›¢(km) / Yè»¸ï¼šæµ·æ‹”é«˜åº¦(m)")
    
    # å»ºç«‹æ¨¡æ“¬æ•¸æ“š (è·é›¢ vs é«˜åº¦)
    data = pd.DataFrame({
        'Location': ['å»£æ²³åŸ', 'ç™½æ ¹å¾¡æ± ', 'è‚©ä¹‹å°å±‹', 'åŒ—å²³', 'åŒ—å²³å±±èŠ', 'é–“ä¹‹å²³', 'è¾²é³¥å°å±‹', 'è¾²é³¥å²³', 'å¤§é–€æ¾¤ä¸‹é™é»', 'å¤§é–€æ¾¤å°å±‹', 'å¥ˆè‰¯ç”°'],
        'Distance': [0, 3.5, 6, 7, 8, 10, 12, 13, 13.5, 17, 22],
        'Elevation': [1520, 2230, 3000, 3193, 2900, 3190, 2800, 3026, 2800, 1700, 820]
    })
    
    # ä½¿ç”¨ Streamlit å…§å»ºçš„æŠ˜ç·šåœ–
    st.line_chart(data, x='Distance', y='Elevation', color="#FF4B4B")
    
    # é¡¯ç¤ºæ•¸æ“šé»è©³æƒ…
    with st.expander("æŸ¥çœ‹è©³ç´°æµ·æ‹”æ•¸æ“š"):
        st.dataframe(data)

# --- åŠŸèƒ½ 3: è£å‚™æª¢æŸ¥ ---
elif menu == "ğŸ’ è£å‚™æª¢æŸ¥æ¸…å–®":
    st.header("ç¸±èµ°è£å‚™ Check List")
    st.warning("è«‹å‹™å¿…åœ¨å‡ºç™¼å‰ä¸€é€±ç¢ºèªæ‰€æœ‰è£å‚™ç‹€æ…‹ï¼")
    
    categories = {
        "å¿…è¦è£å‚™": ["ç™»å±±èƒŒåŒ… (40-50L)", "ç™»å±±é‹ (å»ºè­°é«˜ç­’)", "å²©ç›” (Helmet)", "å…©æˆªå¼é›¨è¡£", "é ­ç‡ˆ + å‚™ç”¨é›»æ± "],
        "è¡£ç‰©ç³»çµ±": ["æ’æ±—åº•å±¤è¡£", "ä¿æš–ä¸­å±¤ (ç¾½çµ¨/åˆ·æ¯›)", "é˜²é¢¨å¤–å¥—", "ç¾Šæ¯›è¥ª (å‚™ç”¨1é›™)", "æ‰‹å¥— (é˜²é¢¨/ä¿æš–)"],
        "ä½å®¿èˆ‡é£²é£Ÿ": ["ç¾é‡‘ (å¤§é‡åƒåœ“éˆ”èˆ‡ç™¾åœ“ç¡¬å¹£)", "è¡Œå‹•é›»æº (20000mAh)", "æ°´è¢‹/æ°´å£º (å»ºè­°2L)", "è¡Œå‹•ç³§ (å·§å…‹åŠ›/é¹½ç³–)", "å€‹äººè—¥å“ (é«˜å±±ç—‡è—¥/æ­¢ç—›è—¥)"],
        "å…¶ä»–å°ç‰©": ["è­·è† (æ¥µåº¦å»ºè­°)", "é˜²æ›¬ä¹³/è­·å”‡è†", "é›¢ç·šåœ°åœ– (æ‰‹æ©ŸAPP)", "æ±‚ç”Ÿæ¯¯", "æ¿•ç´™å·¾"]
    }
    
    # å»ºç«‹äº’å‹•å¼å‹¾é¸æ¡†
    progress = 0
    total_items = sum(len(v) for v in categories.values())
    checked_items = 0

    for category, items in categories.items():
        st.subheader(category)
        for item in items:
            if st.checkbox(item, key=item):
                checked_items += 1
    
    # é€²åº¦æ¢
    st.divider()
    progress = checked_items / total_items
    st.write(f"ç›®å‰æº–å‚™é€²åº¦ï¼š{int(progress*100)}%")
    st.progress(progress)

# --- åŠŸèƒ½ 4: å¤©æ°£é å ± ---
elif menu == "â˜ï¸ å¤©æ°£é å ±":
    st.header("ğŸ”ï¸ ç™½å³°ä¸‰å±±ï¼šé«˜å±±æ°£è±¡ç«™")
    st.info("ğŸ’¡ ç™»å±±æŒ‡æ•¸èªªæ˜ (Tenki.jp)ï¼šA=é©åˆï¼ŒB=é¢¨é›¨ç¨å¼·ï¼ŒC=å¼·é¢¨è±ªé›¨ä¸å®œå‰å¾€ã€‚")
    
    # ä½¿ç”¨ Tabs åˆ†é ä¾†æ•´ç†ä¸‰åº§å±±ï¼Œæ‰‹æ©Ÿç‰ˆç€è¦½æ›´æ¸…çˆ½
    tab1, tab2, tab3 = st.tabs(["åŒ—å²³ (3193m)", "é–“ä¹‹å²³ (3190m)", "è¾²é³¥å²³ (3026m)"])
    
    with tab1:
        st.subheader("åŒ—å²³ (Kitadake)")
        col1, col2 = st.columns(2)
        with col1:
            st.markdown("##### ğŸ‡¯ğŸ‡µ æ—¥æœ¬æ°£è±¡å”æœƒ (Tenki.jp)")
            st.write("å«ç™»å±±æŒ‡æ•¸ (A/B/C) èˆ‡è©³ç´°å°æ™‚é å ±ã€‚")
            # Code 19150004 æ˜¯å±±æ¢¨ç¸£åŒ—å²³çš„å°ˆå±¬ä»£ç¢¼
            st.link_button("å‰å¾€ Tenki.jp åŒ—å²³", "https://tenkura.n-kishou.co.jp/tk/kanko/kad.html?code=19150008&type=15&ba=kk")
        with col2:
            st.markdown("##### ğŸŒ Mountain Forecast")
            st.write("å« 3000m ç¨œç·šé¢¨é€Ÿèˆ‡é«”æ„Ÿæº«åº¦ã€‚")
            st.link_button("å‰å¾€ MF åŒ—å²³ (3193m)", "https://www.mountain-forecast.com/peaks/Kita-dake/forecasts/3193")

    with tab2:
        st.subheader("é–“ä¹‹å²³ (Ainodake)")
        col1, col2 = st.columns(2)
        with col1:
            st.markdown("##### ğŸ‡¯ğŸ‡µ æ—¥æœ¬æ°£è±¡å”æœƒ (Tenki.jp)")
            # Code 20150025 æ˜¯é•·é‡/å±±æ¢¨äº¤ç•Œé–“ä¹‹å²³ä»£ç¢¼
            st.link_button("å‰å¾€ Tenki.jp é–“ä¹‹å²³", "https://tenkura.n-kishou.co.jp/tk/kanko/kad.html?code=20150025&type=15&ba=kk")
        with col2:
            st.markdown("##### ğŸŒ Mountain Forecast")
            st.link_button("å‰å¾€ MF é–“ä¹‹å²³ (3189m)", "https://www.mountain-forecast.com/peaks/Aino-dake/forecasts/3189")

    with tab3:
        st.subheader("è¾²é³¥å²³ (Notoridake)")
        col1, col2 = st.columns(2)
        with col1:
            st.markdown("##### ğŸ‡¯ğŸ‡µ æ—¥æœ¬æ°£è±¡å”æœƒ (Tenki.jp)")
            # Code 19150026 æ˜¯è¾²é³¥å²³ä»£ç¢¼
            st.link_button("å‰å¾€ Tenki.jp è¾²é³¥å²³", "https://tenkura.n-kishou.co.jp/tk/kanko/kad.html?code=19150045&type=15&ba=kk")
        with col2:
            st.markdown("##### ğŸŒ Mountain Forecast")
            st.link_button("å‰å¾€ MF è¾²é³¥å²³ (3026m)", "https://www.mountain-forecast.com/peaks/Notori-dake/forecasts/3026")

    st.divider()
    st.warning("âš ï¸ æ³¨æ„ï¼šè¾²é³¥å²³ä½æ–¼ç¸±èµ°æœ€å—ç«¯ï¼Œå®¹æ˜“å—åˆ°ä¾†è‡ªå¤ªå¹³æ´‹çš„æ°£æµå½±éŸ¿ï¼Œåˆå¾Œèµ·éœ§æˆ–é›·é›¨çš„æ©Ÿç‡é€šå¸¸æ¯”åŒ—å²³é«˜ï¼Œè«‹å‹™å¿…åœ¨ä¸­åˆå‰é€šéç¨œç·šã€‚")
